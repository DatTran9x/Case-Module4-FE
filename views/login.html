<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Log In</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
<!--    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
</head>
<body>
<div>
    <label for="username">Username</label>
    <input type="text" id="username">
    <label for="password">Password</label>
    <input type="password" name="password" id="password">
    <button onclick="login()">Login</button>
</div>
</body>
</html>

<script>
    function login(){
        let username = document.getElementById("username").value;
        let password = document.getElementById("password").value;
        let appUser = {
            email:username,
            password:password
        }
        let appUserOBJ = JSON.stringify(appUser)
        console.log(appUser);
        $.ajax({
            type: "POST",
            headers: {
                // 'Accept': 'application/json', Tra ve kieu du lieu Json
                'Content-Type': 'application/json; charset=utf8'
            },
            // beforeSend: function (xhr) {
            //     xhr.setRequestHeader('Authorization', 'Bearer ' + token);
            // },
            data: JSON.stringify(appUser),
            url: "http://localhost:8080/login",
            // async: false,
            // url: 'http://localhost:8080/login',
            // method: 'POST',
            // data: appUserOBJ,
            // contentType: 'application/json; charset=utf8',
            success: function (data) {
                console.log('goi ham ====>')
                console.log('-------->',data);
                localStorage.setItem("token",data.token);
                console.log(data.token);
                // if(data.rolename=="LECTURE"){
                    location.replace("http://localhost:63343/Case-Module4-FE/views/src/index.html?_ijt=shcr0gidshun64r9gpg6pivrf1&_ij_reload=RELOAD_ON_SAVE");
                // } else {
                //     location.replace("http://localhost:63343/casemodule4-fe/views/Grades/Student/student-grades.html?_ijt=vv2h7cqim1k27ssj727go72a67&_ij_reload=RELOAD_ON_SAVE");
                // }
            },
            error: function (err) {
                // console.log(err);
            }
        })
    }
</script>